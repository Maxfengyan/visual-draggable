import{h as e,d as t,r as o,w as n,a,c as l,b as r,e as s,o as d,f as i,g as p,i as c,p as u,j as m,n as y,k as h,_ as f,F as x,l as v,t as b,m as g,v as k,q as w,s as C,u as D,x as M,y as I,z as S,A as _,B as V,C as E,D as L,E as A,G as P,H as N,I as q,J as T,K as z,L as R,M as F,N as U,O,P as B,Q as j,R as W,S as H,T as X,U as Y}from"./vendor.aa377ea3.js";var K={render:()=>e("span",{style:{"line-height":"34px","margin-right":"15px",cursor:"pointer","user-select":"none"}},e("i",{class:"el-icon-back",onClick:$},"返回 |"))};function $(){history.back()}const G=t({emits:["addComponent","clearall"],props:{componentData:{type:Array}},setup(e,t){const a=o({data:e.componentData});n((()=>e.componentData),(e=>{a.data=e}));window.params=e.componentData;return{addComponent:e=>{t.emit("addComponent",e)},clearCanvas:()=>{t.emit("clearall")},review:()=>{window.open("./review/review.html","_blank","height=720, width=1280, top=0px, left=0px, toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no")}}}}),J=i("添加图片"),Q=i("添加热区"),Z=i("添加文字"),ee=i("清空画布"),te=i("预览"),oe=i("保存");G.render=function(e,t,o,n,i,p){const c=a("el-button"),u=a("el-button-group");return d(),l("div",null,[r(u,null,{default:s((()=>[r(c,{size:"small",type:"success",round:"",onClick:t[0]||(t[0]=t=>e.addComponent(0))},{default:s((()=>[J])),_:1}),r(c,{size:"small",type:"success",round:"",onClick:t[1]||(t[1]=t=>e.addComponent(1))},{default:s((()=>[Q])),_:1}),r(c,{size:"small",type:"success",round:"",onClick:t[2]||(t[2]=t=>e.addComponent(2))},{default:s((()=>[Z])),_:1})])),_:1}),r(u,{style:{"margin-left":"20px"}},{default:s((()=>[r(c,{size:"small",type:"primary",round:"",onClick:e.clearCanvas},{default:s((()=>[ee])),_:1},8,["onClick"]),r(c,{size:"small",type:"primary",round:"",onClick:e.review},{default:s((()=>[te])),_:1},8,["onClick"]),r(c,{size:"small",type:"primary",round:""},{default:s((()=>[oe])),_:1})])),_:1})])};const ne=t({setup:()=>({state:o({canvasWidth:1280,canvasHeight:860})})}),ae=c("span",null,"*",-1);ne.render=function(e,t,o,n,l,i){const c=a("el-input"),u=a("el-form-item"),m=a("el-form");return d(),p(m,{inline:!0,size:"mini"},{default:s((()=>[r(u,{label:"画布大小："},{default:s((()=>[r(c,{modelValue:e.state.canvasWidth,"onUpdate:modelValue":t[0]||(t[0]=t=>e.state.canvasWidth=t),style:{width:"60px"}},null,8,["modelValue"])])),_:1}),r(u,null,{default:s((()=>[ae])),_:1}),r(u,{label:""},{default:s((()=>[r(c,{modelValue:e.state.canvasHeight,"onUpdate:modelValue":t[1]||(t[1]=t=>e.state.canvasHeight=t),style:{width:"60px"}},null,8,["modelValue"])])),_:1})])),_:1})};var le={render:()=>e("span",{style:{"line-height":"34px","margin-left":"15px",color:"#409eff","font-size":"12px"}},e("i",{class:"el-icon-bell"}," 蓝色边框区域内尺寸为1280*720"))};let re;const se={};const de=t({setup(){const e=o({status:!0,styleText:""});return n(e,(t=>{if(t.status){var o=document.querySelectorAll("head style"),n=o[o.length-1];0===n.innerHTML.indexOf("#darkModel")&&(e.styleText=n.innerHTML,document.querySelector("head").removeChild(n))}else if(e.styleText){var a=document.createElement("style");a.innerHTML=e.styleText,document.querySelector("head").appendChild(a)}else!function(e,t){if(!t||0===t.length)return e();if(void 0===re){const e=document.createElement("link").relList;re=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}Promise.all(t.map((e=>{if((e=`./${e}`)in se)return;se[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":re,t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise(((e,t)=>{n.addEventListener("load",e),n.addEventListener("error",t)})):void 0}))).then((()=>e()))}((()=>import("./dark.248f0e9a.js")),[])})),{state:e}}});u("data-v-325dc472");const ie=["title"];m(),de.render=function(e,t,o,n,a,r){return d(),l("i",{class:y(["model",[e.state.status?"el-icon-sunny":"el-icon-moon"]]),title:e.state.status?"日照模式":"夜间模式",onClick:t[0]||(t[0]=t=>e.state.status=!e.state.status)},null,10,ie)},de.__scopeId="data-v-325dc472";const pe={};u("data-v-071db746");const ce={t:"1627293865259",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4193","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"40",fill:"#409eff",height:"40"},ue=[c("path",{d:"M32 0 972.651987 0 972.651987 316.651576 931.05337 316.651576C931.05337 316.651576 851.664627 123.301587 757.99696 106.426488 664.326945 89.551388 599.217138 101.163665 599.217138 101.163665L598.048275 908.460659C598.048275 908.460659 624.046382 963.027206 666.957181 966.897965L761.948781 966.897965 761.948781 1022.63337 242.777214 1022.63337 244.09057 965.511776 327.28898 964.19607C327.28898 964.19607 389.765027 944.689555 389.765027 899.258944 389.765027 853.896474 391.083083 107.668185 391.083083 107.668185 391.083083 107.668185 288.327649 93.496156 234.939369 106.496972 181.625097 119.427304 87.881073 197.297106 73.598618 311.462763L32 312.778468 32 0 32 0 32 0Z","p-id":"4194"},null,-1)];m(),pe.render=function(e,t,o,n,a,r){return d(),l("svg",ce,ue)},pe.__scopeId="data-v-071db746";const me=t({props:{componentData:{type:Array,required:!0},activeIndex:{type:Number,default:0,required:!0}},components:{IconText:pe},emits:["changeindex"],setup(e,t){const o=h([]),a=h();n((()=>e.componentData),(e=>{o.value=e}),{deep:!0});return{data:o,handleDragStart:t=>{if(e.componentData[t.target.dataset.index].lockStatus)return f.alert("组件已锁定",{type:"error"}),!1;a.value=Array.from(document.querySelectorAll(".special-left-item")),t.target.style.opacity=.4,t.dataTransfer.setData("index",t.target.dataset.index)},handleDrop:e=>{let t;e.preventDefault(),e.stopPropagation();for(let o=0;o<a.value.length;o++){let n=a.value[o];if(n.contains(e.target)){t=n;break}}const n=parseInt(e.dataTransfer.getData("index"));if(t){let t;const l=e.target.getBoundingClientRect().top+"";for(let e=0;e<a.value.length;e++){a.value[e].getBoundingClientRect().top<l&&(t=e)}let r=o.value.splice(n,1);o.value.splice(t,0,r[0])}else if(e.target.className.includes("el-scrollbar__wrap")){let e=o.value.splice(n,1);o.value.splice(o.value.length,0,e[0])}},handleDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"},handleDragEnd:e=>{e.target.style.opacity=1},deleteItem:e=>{if(o.value[e].lockStatus)return f.alert("组件已锁定",{type:"error"}),!1;o.value.splice(e,1)},moveItem:(e,t)=>{if(o.value[t].lockStatus)return f.alert("组件已锁定",{type:"error"}),!1;if("up"===e){if(t>0){const e=o.value[t];o.value[t]=o.value[t-1],o.value[t-1]=e}}else if(t<o.value.length-1){const e=o.value[t];o.value[t]=o.value[t+1],o.value[t+1]=e}},positionItem:(e,o)=>{o.preventDefault(),t.emit("changeindex",e)}}}});u("data-v-ca8e8314");const ye=["data-index"],he={class:"special-left-item-index",title:"序号越大，显示层级优先级越高"},fe={class:"special-left-item-content"},xe={key:0,class:"el-icon-picture"},ve={key:1,class:"el-icon-full-screen"},be={class:"special-left-item-button"},ge=["onClick"],ke=["onClick"],we=["onClick"],Ce=["onClick"],De=["onClick"];m(),me.render=function(e,t,o,n,i,u){const m=a("iconText"),h=a("el-scrollbar");return d(),l("div",{class:"special-left",onDrop:t[0]||(t[0]=(...t)=>e.handleDrop&&e.handleDrop(...t)),onDragend:t[1]||(t[1]=(...t)=>e.handleDragEnd&&e.handleDragEnd(...t)),onDragstart:t[2]||(t[2]=(...t)=>e.handleDragStart&&e.handleDragStart(...t)),onDragover:t[3]||(t[3]=(...t)=>e.handleDragOver&&e.handleDragOver(...t))},[r(h,{height:"100%"},{default:s((()=>[(d(!0),l(x,null,v(e.data,((t,o)=>(d(),l("div",{draggable:"true",class:"special-left-item","data-index":o},[c("div",{class:y(["special-left-item-mark",{activeMark:e.activeIndex===o}]),title:"序号越大，显示层级优先级越高"},null,2),c("div",he,b(o+1),1),c("div",fe,[0==t.type?(d(),l("i",xe)):1==t.type?(d(),l("i",ve)):(d(),p(m,{key:2})),c("span",null,b(t.label),1)]),c("div",be,[g(c("i",{class:"el-icon-unlock",title:"锁定",onClick:e=>t.lockStatus=!0},null,8,ge),[[k,!t.lockStatus]]),g(c("i",{class:"el-icon-lock",title:"解锁",style:{color:"red"},onClick:e=>t.lockStatus=!1},null,8,ke),[[k,t.lockStatus]]),c("i",{class:"el-icon-bottom",onClick:t=>e.moveItem("down",o),title:"向下移动"},null,8,we),c("i",{class:"el-icon-top",onClick:t=>e.moveItem("up",o),title:"向上移动"},null,8,Ce),c("i",{class:"el-icon-delete",title:"删除",onClick:t=>e.deleteItem(o)},null,8,De)])],8,ye)))),256))])),_:1})],32)},me.__scopeId="data-v-ca8e8314";const Me={mounted(){for(var e=document.querySelector("#canvas").getContext("2d"),t=20,o=e.canvas.width,n=e.canvas.height,a=Math.floor(n/t),l=0;l<a;l++)e.beginPath(),e.moveTo(0,t*l-.5),e.lineTo(o,t*l-.5),e.strokeStyle=a-l==7?"#409eff":"#ccc",e.stroke();for(var r=Math.floor(o/t)+1,s=0;s<r;s++)e.beginPath(),0===s||s==r-1?(e.moveTo(t*s,0),e.strokeStyle="#409eff",e.lineTo(t*s,720)):(e.moveTo(t*s,0),e.strokeStyle="#ccc",e.lineTo(t*s,n)),e.stroke()}},Ie={id:"canvas",width:"1280",height:"860"};function Se(e){return e*Math.PI/180}function _e(e){return(e+360)%360}function Ve(e,t,o){return{x:(e.x-t.x)*Math.cos(Se(o))-(e.y-t.y)*Math.sin(Se(o))+t.x,y:(e.x-t.x)*Math.sin(Se(o))+(e.y-t.y)*Math.cos(Se(o))+t.y}}function Ee(e,t){return{x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2}}Me.render=function(e,t,o,n,a,r){return d(),l("canvas",Ie)};const Le=[{start:338,end:23,cursor:"nw"},{start:23,end:68,cursor:"n"},{start:68,end:113,cursor:"ne"},{start:113,end:158,cursor:"e"},{start:158,end:203,cursor:"se"},{start:203,end:248,cursor:"s"},{start:248,end:293,cursor:"sw"},{start:293,end:338,cursor:"w"}],Ae={lt:0,t:45,rt:90,r:135,rb:180,b:225,lb:270,l:315},Pe=(e,t)=>{const{width:o,height:n}=t,a=/t/.test(e),l=/b/.test(e),r=/l/.test(e),s=/r/.test(e);let d=0,i=0;2===e.length?(d=r?0:o,i=a?0:n):((a||l)&&(d=o/2,i=a?0:n),(r||s)&&(d=r?0:o,i=Math.floor(n/2)));return{marginLeft:"-4px",marginTop:"-4px",left:d+"px",top:i+"px",cursor:Ne(e,t)}},Ne=(e,t)=>{const o=_e(t.rotate);let n="";const a=_e(Ae[e]+o);return Le.forEach((e=>{(a<23||a>338)&&(n="nw-resize"),e.start<=a&&a<e.end&&(n=e.cursor+"-resize")})),n},qe=(e,t,o)=>{o.preventDefault(),o.stopPropagation();const n=e,a=o.clientY,l=o.clientX,r=n.rotate,s=t.getBoundingClientRect(),d=s.left+s.width/2,i=s.top+s.height/2,p=Math.atan2(a-i,l-d)/(Math.PI/180),c=t=>{const o=t.clientX,n=t.clientY,a=Math.atan2(n-i,o-d)/(Math.PI/180);let l=r+a-p;e.rotate=l},u=e=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u)};document.addEventListener("mousemove",c),document.addEventListener("mouseup",u)},Te={lt:function(e,t,o,n,a){const{symmetricPoint:l}=a;let r=Ee(t,l),s=Ve(t,r,-e.rotate),d=Ve(l,r,-e.rotate),i=d.x-s.x,p=d.y-s.y;if(n){i/p>o?(s.x+=Math.abs(i-p*o),i=p*o):(s.y+=Math.abs(p-i/o),p=i/o);const t=Ve(s,r,e.rotate);r=Ee(t,l),s=Ve(t,r,-e.rotate),d=Ve(l,r,-e.rotate),i=d.x-s.x,p=d.y-s.y}i>0&&p>0&&(e.width=Math.round(i),e.height=Math.round(p),e.left=Math.round(s.x),e.top=Math.round(s.y))},t:function(e,t,o,n,a){const{symmetricPoint:l,curPoint:r}=a;let s=Ve(t,r,-e.rotate),d=Ve({x:r.x,y:s.y},r,e.rotate),i=Math.sqrt((d.x-l.x)**2+(d.y-l.y)**2);if(i>0){const t={x:d.x-(d.x-l.x)/2,y:d.y+(l.y-d.y)/2};let a=e.width;n&&(a=i*o),e.width=a,e.height=Math.round(i),e.top=Math.round(t.y-i/2),e.left=Math.round(t.x-e.width/2)}},rt:function(e,t,o,n,a){const{symmetricPoint:l}=a;let r=Ee(t,l),s=Ve(t,r,-e.rotate),d=Ve(l,r,-e.rotate),i=s.x-d.x,p=d.y-s.y;if(n){i/p>o?(s.x-=Math.abs(i-p*o),i=p*o):(s.y+=Math.abs(p-i/o),p=i/o);const t=Ve(s,r,e.rotate);r=Ee(t,l),s=Ve(t,r,-e.rotate),d=Ve(l,r,-e.rotate),i=s.x-d.x,p=d.y-s.y}i>0&&p>0&&(e.width=Math.round(i),e.height=Math.round(p),e.left=Math.round(d.x),e.top=Math.round(s.y))},r:function(e,t,o,n,a){const{symmetricPoint:l,curPoint:r}=a,s=Ve(t,r,-e.rotate),d=Ve({x:s.x,y:r.y},r,e.rotate);let i=Math.sqrt((d.x-l.x)**2+(d.y-l.y)**2);if(i>0){const t={x:d.x-(d.x-l.x)/2,y:d.y+(l.y-d.y)/2};let a=e.height;n&&(a=i/o),e.height=a,e.width=Math.round(i),e.top=Math.round(t.y-e.height/2),e.left=Math.round(t.x-i/2)}},rb:function(e,t,o,n,a){const{symmetricPoint:l}=a;let r=Ee(t,l),s=Ve(l,r,-e.rotate),d=Ve(t,r,-e.rotate),i=d.x-s.x,p=d.y-s.y;if(n){i/p>o?(d.x-=Math.abs(i-p*o),i=p*o):(d.y-=Math.abs(p-i/o),p=i/o);const t=Ve(d,r,e.rotate);r=Ee(t,l),s=Ve(l,r,-e.rotate),d=Ve(t,r,-e.rotate),i=d.x-s.x,p=d.y-s.y}i>0&&p>0&&(e.width=Math.round(i),e.height=Math.round(p),e.left=Math.round(s.x),e.top=Math.round(s.y))},b:function(e,t,o,n,a){const{symmetricPoint:l,curPoint:r}=a,s=Ve(t,r,-e.rotate),d=Ve({x:r.x,y:s.y},r,e.rotate),i=Math.sqrt((d.x-l.x)**2+(d.y-l.y)**2);if(i>0){const t={x:d.x-(d.x-l.x)/2,y:d.y+(l.y-d.y)/2};let a=e.width;n&&(a=i*o),e.width=a,e.height=Math.round(i),e.top=Math.round(t.y-i/2),e.left=Math.round(t.x-e.width/2)}},lb:function(e,t,o,n,a){const{symmetricPoint:l}=a;let r=Ee(t,l),s=Ve(l,r,-e.rotate),d=Ve(t,r,-e.rotate),i=s.x-d.x,p=d.y-s.y;if(n){i/p>o?(d.x+=Math.abs(i-p*o),i=p*o):(d.y-=Math.abs(p-i/o),p=i/o);const t=Ve(d,r,e.rotate);r=Ee(t,l),s=Ve(l,r,-e.rotate),d=Ve(t,r,-e.rotate),i=s.x-d.x,p=d.y-s.y}i>0&&p>0&&(e.width=Math.round(i),e.height=Math.round(p),e.left=Math.round(d.x),e.top=Math.round(s.y))},l:function(e,t,o,n,a){const{symmetricPoint:l,curPoint:r}=a,s=Ve(t,r,-e.rotate),d=Ve({x:s.x,y:r.y},r,e.rotate),i=Math.sqrt((d.x-l.x)**2+(d.y-l.y)**2);if(i>0){const t={x:d.x-(d.x-l.x)/2,y:d.y+(l.y-d.y)/2};let a=e.height;n&&(a=i/o),e.height=a,e.width=Math.round(i),e.top=Math.round(t.y-e.height/2),e.left=Math.round(t.x-i/2)}}};const ze=(e,t,o,n,a)=>{n.stopPropagation(),n.preventDefault();const l=e.width/e.height,r={x:e.left+e.width/2,y:e.top+e.height/2},s=document.querySelector(".editor").getBoundingClientRect(),d=n.target.getBoundingClientRect(),i={x:Math.round(d.left-s.left+n.target.offsetWidth/2),y:Math.round(d.top-s.top+n.target.offsetHeight/2)},p={x:r.x-(i.x-r.x),y:r.y-(i.y-r.y)};let c=!0;const u=t=>{if(c)return void(c=!1);const n={x:t.clientX-s.left,y:t.clientY-s.top};!function(e,t,o,n,a,l){Te[e](t,o,n,a,l)}(o,e,n,l,!1,{center:r,curPoint:i,symmetricPoint:p})},m=()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",m)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",m)};const Re=t({props:{defaultStyle:{type:Object,required:!0},componentType:{type:Number},currentIndex:{type:Number},activeIndex:{type:Number},lockStatus:{}},emits:["changeactiveindex"],setup(e,t){const n=h(),a=o({pointList:["lt","t","rt","r","rb","b","lb","l"],style:e.defaultStyle}),l=w((()=>e.currentIndex===e.activeIndex));return{state:a,getPointStyle:Pe,handleRotate:qe,componentActive:l,shape:n,handleMouseDownPoint:ze,handleMouseDownOnShape:o=>{if(t.emit("changeactiveindex",e.currentIndex),e.lockStatus)return!1;0===e.componentType&&o.preventDefault(),o.stopPropagation();const n=o.clientY,a=o.clientX,l=Number(e.defaultStyle.top),r=Number(e.defaultStyle.left),s=t=>{const o=t.clientX,s=t.clientY;o-a+r<0&&(e.defaultStyle.left=0),o-a+r+e.defaultStyle.width>1280&&(e.defaultStyle.left=1280-e.defaultStyle.width),o-a+r>=0&&o-a+r+e.defaultStyle.width<=1280&&(e.defaultStyle.left=o-a+r),e.defaultStyle.top=s-n+l<0?0:s-n+l},d=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",d)};document.addEventListener("mousemove",s),document.addEventListener("mouseup",d)},selectCurComponent:e=>{e.target.focus(),e.stopPropagation(),e.preventDefault()}}}});u("data-v-03179ab8");const Fe={class:"el-icon-lock"},Ue=["onMousedown"];m(),Re.render=function(e,t,o,n,a,r){return d(),l("div",{tabindex:"1",class:"shape",style:D({opacity:e.lockStatus?.6:1}),ref:"shape",onClick:t[1]||(t[1]=(...t)=>e.selectCurComponent&&e.selectCurComponent(...t)),onMousedown:t[2]||(t[2]=t=>e.handleMouseDownOnShape(t))},[g(c("i",{class:"el-icon-refresh-right",onMousedown:t[0]||(t[0]=t=>e.handleRotate(e.defaultStyle,e.shape,t))},null,544),[[k,e.componentActive&&!e.lockStatus]]),g(c("i",Fe,null,512),[[k,!1]]),(d(!0),l(x,null,v(e.componentActive?e.state.pointList:[],((t,o)=>g((d(),l("div",{class:"shape-point",style:D(e.getPointStyle(t,e.defaultStyle,e.state)),onMousedown:o=>e.handleMouseDownPoint(e.defaultStyle,e.shape,t,o,e.state)},null,44,Ue)),[[k,!e.lockStatus]]))),256)),C(e.$slots,"default",{},void 0,!0)],36)},Re.__scopeId="data-v-03179ab8";const Oe=t({props:{contextStatus:{type:Boolean,required:!0},contextLeft:{type:Number,required:!0},contextTop:{type:Number,required:!0},contextIndex:{type:Number},contextData:{type:Array,required:!0}},setup(e,t){const n=o({copyData:{}});return{state:n,copy:()=>{const{contextData:t,contextIndex:o}=e;n.copyData=JSON.parse(JSON.stringify(t[o]))},paste:t=>{Object.keys(n.copyData).length>0&&(n.copyData.style.top=t.clientY-100,n.copyData.style.left=t.clientX-250,n.copyData.lockStatus=!1,e.contextData.push(n.copyData),n.copyData={})},lock:()=>{const{contextData:t,contextIndex:o}=e;t[o].lockStatus=!0},unLock:()=>{const{contextData:t,contextIndex:o}=e;t[o].lockStatus=!1},deleteComponent:()=>{const{contextData:t,contextIndex:o}=e;t.splice(o,1)},topComponent:()=>{const{contextData:t,contextIndex:o}=e;var n=t.splice(o,1);t.push(n[0])},bottomComponent:()=>{const{contextData:t,contextIndex:o}=e;var n=t.splice(o,1);t.unshift(n[0])}}}});Oe.render=function(e,t,o,n,a,r){return g((d(),l("div",{class:"contextmenu",style:D({top:e.contextTop+"px",left:e.contextLeft+"px"})},[c("ul",null,[Object.keys(e.state.copyData).length>0?(d(),l("li",{key:0,onClick:t[0]||(t[0]=(...t)=>e.paste&&e.paste(...t))},"粘贴")):M("",!0),-1!==e.contextIndex?(d(),l(x,{key:1},[c("li",{onClick:t[1]||(t[1]=(...t)=>e.copy&&e.copy(...t))},"复制"),e.contextData[e.contextIndex]&&e.contextData[e.contextIndex].lockStatus?(d(),l("li",{key:0,onClick:t[2]||(t[2]=(...t)=>e.unLock&&e.unLock(...t))}," 解锁 ")):(d(),l("li",{key:1,onClick:t[3]||(t[3]=(...t)=>e.lock&&e.lock(...t))},"锁定")),e.contextData[e.contextIndex]&&!e.contextData[e.contextIndex].lockStatus?(d(),l("li",{key:2,onClick:t[4]||(t[4]=(...t)=>e.deleteComponent&&e.deleteComponent(...t))}," 删除 ")):M("",!0),e.contextData[e.contextIndex]&&!e.contextData[e.contextIndex].lockStatus?(d(),l("li",{key:3,onClick:t[5]||(t[5]=(...t)=>e.topComponent&&e.topComponent(...t))}," 置顶 ")):M("",!0),e.contextData[e.contextIndex]&&!e.contextData[e.contextIndex].lockStatus?(d(),l("li",{key:4,onClick:t[6]||(t[6]=(...t)=>e.bottomComponent&&e.bottomComponent(...t))}," 置底 ")):M("",!0)],64)):M("",!0)])],4)),[[k,e.contextStatus]])},Oe.__scopeId="data-v-6c1c644b";const Be={props:{propValue:{type:String,require:!0},element:{type:Object},propIndex:{type:Number},borderRadius:{type:Number,required:!0,default:0}},emits:["deleteitem","move"],setup:(e,t)=>({deleteItem:()=>{t.emit("deleteitem",e.propIndex)},move:o=>{t.emit("move",e.propIndex,o)}})};u("data-v-6054fde0");const je=["src"];m(),Be.render=function(e,t,o,n,a,r){return d(),l("div",{style:D([{overflow:"hidden"},{"border-radius":o.borderRadius+"px"}])},[c("img",{src:o.propValue,tabindex:"1",onKeydown:[t[0]||(t[0]=I(((...e)=>n.deleteItem&&n.deleteItem(...e)),["delete"])),t[1]||(t[1]=I((e=>n.move("down")),["down"])),t[2]||(t[2]=I((e=>n.move("up")),["up"])),t[3]||(t[3]=I((e=>n.move("left")),["left"])),t[4]||(t[4]=I((e=>n.move("right")),["right"]))]},null,40,je)],4)},Be.__scopeId="data-v-6054fde0";const We={props:{propData:{type:Object,required:!0},propIndex:{type:Number},propElement:{type:Object,required:!0}},emits:["deleteitem","move"],setup(e,t){const n=o({editable:!1});return{state:n,handleLine:e=>{n.editable=!1},changeEditable:async e=>{n.editable=!0,await _(),document.querySelector("textarea").focus()},deleteItem:()=>{t.emit("deleteitem",e.propIndex)},move:o=>{t.emit("move",e.propIndex,o)}}}};We.render=function(e,t,o,n,a,r){return n.state.editable?g((d(),l("textarea",{key:0,rows:"1","onUpdate:modelValue":t[0]||(t[0]=e=>o.propData.propValue=e),onChange:t[1]||(t[1]=(...e)=>n.handleLine&&n.handleLine(...e)),style:D({color:o.propElement.color,"font-size":o.propElement.fontSize+"px","font-weight":o.propElement.fontWeight})},null,36)),[[S,o.propData.propValue]]):(d(),l("div",{key:1,onDblclick:t[2]||(t[2]=(...e)=>n.changeEditable&&n.changeEditable(...e)),tabindex:"1",onKeydown:[t[3]||(t[3]=I(((...e)=>n.deleteItem&&n.deleteItem(...e)),["delete"])),t[4]||(t[4]=I((e=>n.move("down")),["down"])),t[5]||(t[5]=I((e=>n.move("up")),["up"])),t[6]||(t[6]=I((e=>n.move("left")),["left"])),t[7]||(t[7]=I((e=>n.move("right")),["right"]))],style:D({color:o.propElement.color,"font-size":o.propElement.fontSize+"px","font-weight":o.propElement.fontWeight})},b(o.propData.propValue),37))},We.__scopeId="data-v-fd93e078";const He={props:{borderRadius:{type:Number,require:!0},propColor:{type:String,require:!0},propIndex:{type:Number,require:!0},propDefault:{type:Boolean,require:!0}},emits:["deleteitem","move"],setup:(e,t)=>({deleteItem:()=>{t.emit("deleteitem",e.propIndex)},move:o=>{t.emit("move",e.propIndex,o)}})};He.render=function(e,t,o,n,a,r){return d(),l("div",{class:"hotarea",style:D({"border-radius":o.borderRadius+"px","border-color":o.propDefault?"#67C23A":o.propColor}),tabindex:"1",onKeydown:[t[0]||(t[0]=I(((...e)=>n.deleteItem&&n.deleteItem(...e)),["delete"])),t[1]||(t[1]=I((e=>n.move("down")),["down"])),t[2]||(t[2]=I((e=>n.move("up")),["up"])),t[3]||(t[3]=I((e=>n.move("left")),["left"])),t[4]||(t[4]=I((e=>n.move("right")),["right"]))]},null,36)},He.__scopeId="data-v-4b5ab986";const Xe={props:{componentData:{type:Array}},emits:["activeindex"],components:{Shapecomponent:Re,Contextmenu:Oe,vImg:Be,vWord:We,vHot:He},setup(e,t){const a=o({data:[],active:0,showContextMenu:!1,left:0,top:0});n((()=>e.componentData),(e=>{1==e.length&&(a.active=0),a.data=e}),{deep:!0});return{state:a,getShapeStyle:(e,t)=>{const o={};return["width","height","top","left","rotate","borderRadius"].forEach((t=>{"rotate"===t?o.transform="rotate("+e[t]+"deg)":o[t]="zIndex"===t?e[t]:e[t]+"px"})),o},handleActiveIndex:e=>{a.active=e,t.emit("activeindex",e)},handleContextMenu:e=>{e.stopPropagation(),e.preventDefault(),a.showContextMenu=!0;let t=e.target,o=e.offsetY,n=e.offsetX;for(;!t.className.includes("editor");)n=t.offsetLeft+n,o=t.offsetTop+o,t=t.parentNode;a.left=n,a.top=o},cancelContextMenu:e=>{2!==e.button&&(a.showContextMenu=!1),e.target.className.includes("editor")&&(a.active=-1,t.emit("activeindex",-1))},handleDelete:e=>{a.data.splice(e,1)},handleMove:(e,t)=>{"left"===t?a.data[e].style.left=a.data[e].style.left<=0?0:a.data[e].style.left-1:"right"===t?a.data[e].style.left=a.data[e].style.left+a.data[e].style.width>=1280?a.data[e].style.left:a.data[e].style.left+1:a.data[e].style.top="up"===t?a.data[e].style.top<=0?0:a.data[e].style.top-1:a.data[e].style.top+1}}}};Xe.render=function(e,t,o,n,i,c){const u=a("shapecomponent"),m=a("contextmenu");return d(),l("div",{class:"editor",onContextmenu:t[0]||(t[0]=(...e)=>n.handleContextMenu&&n.handleContextMenu(...e)),onMouseup:t[1]||(t[1]=(...e)=>n.cancelContextMenu&&n.cancelContextMenu(...e))},[(d(!0),l(x,null,v(n.state.data,((e,t)=>(d(),p(u,{style:D(n.getShapeStyle(e.style,t)),"default-style":e.style,"component-type":e.type,"current-index":t,"lock-status":e.lockStatus,"active-index":n.state.active,onChangeactiveindex:n.handleActiveIndex},{default:s((()=>[0===e.type?(d(),p(V(e.component),{key:0,class:"component","prop-value":e.propValue,"border-radius":e.style.borderRadius,"prop-index":t,onDeleteitem:n.handleDelete,onMove:n.handleMove},null,8,["prop-value","border-radius","prop-index","onDeleteitem","onMove"])):1===e.type?(d(),p(V(e.component),{key:1,class:"component","prop-index":t,"border-radius":e.style.borderRadius,"prop-default":e.default,"prop-color":e.style.color,onDeleteitem:n.handleDelete,onMove:n.handleMove},null,8,["prop-index","border-radius","prop-default","prop-color","onDeleteitem","onMove"])):(d(),p(V(e.component),{key:2,class:"component","prop-data":e,"prop-index":t,"prop-element":e.style,onDeleteitem:n.handleDelete,onMove:n.handleMove},null,8,["prop-data","prop-index","prop-element","onDeleteitem","onMove"]))])),_:2},1032,["style","default-style","component-type","current-index","lock-status","active-index","onChangeactiveindex"])))),256)),r(m,{"context-data":n.state.data,"context-status":n.state.showContextMenu,"context-left":n.state.left,"context-top":n.state.top,"context-index":n.state.active},null,8,["context-data","context-status","context-left","context-top","context-index"])],32)},Xe.__scopeId="data-v-3fa80b70";const Ye=t({props:{propertyData:{type:Object,required:!0}},setup(e,t){const a=h({}),l=o({width:"",height:""});a.value=e.propertyData,n((()=>e.propertyData),(e=>{a.value=e}));return{property:a,handleNumber:(e,t)=>{switch(e){case"width":t<20&&(a.value.style[e]=20),t>1280&&(a.value.style[e]=1280);break;case"height":t<20&&(a.value.style[e]=20);break;case"X":t<=0&&(a.value.style.left=0);break;case"Y":t<=0&&(a.value.style.top=0);break;case"rotate":360==parseInt(t)&&(a.value.style.rotate=0);break;case"borderRadius":t<=0&&(a.value.style.borderRadius=0);break;case"fontSize":t<=14&&(a.value.style.fontSize=14)}},handleFileChange:e=>{const t=e.target.files[0];if(!t.type.includes("image"))return E.error("只能传图片"),!1;const o=new FileReader;o.onload=e=>{const t=e.target.result,o=new Image;o.onload=()=>{a.value.propValue=t,l.width=o.width,l.height=o.height,document.querySelector("#input").setAttribute("type","text"),document.querySelector("#input").setAttribute("type","file")},o.src=t},o.readAsDataURL(t)},state:l}}});u("data-v-3506957d");const Ke=["src"],$e=i("否"),Ge=i("是");m(),Ye.render=function(e,t,o,n,l,i){const u=a("el-input"),m=a("el-form-item"),y=a("el-col"),h=a("el-option"),f=a("el-select"),x=a("el-color-picker"),v=a("el-radio"),b=a("el-row"),g=a("el-form");return d(),p(g,{size:"medium"},{default:s((()=>[r(b,null,{default:s((()=>[r(y,{span:24},{default:s((()=>[r(m,{label:"标签名:","label-width":"73px"},{default:s((()=>[r(u,{modelValue:e.property.label,"onUpdate:modelValue":t[0]||(t[0]=t=>e.property.label=t)},null,8,["modelValue"])])),_:1})])),_:1}),r(y,{span:24},{default:s((()=>[r(m,{label:"宽:","label-width":"73px"},{default:s((()=>[r(u,{type:"number",modelValue:e.property.style.width,"onUpdate:modelValue":t[1]||(t[1]=t=>e.property.style.width=t),modelModifiers:{number:!0},onInput:t[2]||(t[2]=t=>e.handleNumber("width",t))},null,8,["modelValue"])])),_:1})])),_:1}),r(y,{span:24},{default:s((()=>[r(m,{label:"高:","label-width":"73px"},{default:s((()=>[r(u,{type:"number",modelValue:e.property.style.height,"onUpdate:modelValue":t[3]||(t[3]=t=>e.property.style.height=t),modelModifiers:{number:!0},onInput:t[4]||(t[4]=t=>e.handleNumber("height",t))},null,8,["modelValue"])])),_:1})])),_:1}),r(y,{span:24},{default:s((()=>[r(m,{label:"X坐标:","label-width":"73px"},{default:s((()=>[r(u,{type:"number",modelValue:e.property.style.left,"onUpdate:modelValue":t[5]||(t[5]=t=>e.property.style.left=t),modelModifiers:{number:!0},onInput:t[6]||(t[6]=t=>e.handleNumber("X",t))},null,8,["modelValue"])])),_:1})])),_:1}),r(y,{span:24},{default:s((()=>[r(m,{label:"Y坐标:","label-width":"73px"},{default:s((()=>[r(u,{type:"number",modelValue:e.property.style.top,"onUpdate:modelValue":t[7]||(t[7]=t=>e.property.style.top=t),modelModifiers:{number:!0},onInput:t[8]||(t[8]=t=>e.handleNumber("Y",t))},null,8,["modelValue"])])),_:1})])),_:1}),r(y,{span:24},{default:s((()=>[r(m,{label:"跳转地址:","label-width":"73px"},{default:s((()=>[r(u,{modelValue:e.property.url,"onUpdate:modelValue":t[9]||(t[9]=t=>e.property.url=t)},null,8,["modelValue"])])),_:1})])),_:1}),r(y,{span:24},{default:s((()=>[r(m,{label:"旋转角度:","label-width":"73px"},{default:s((()=>[r(u,{type:"number",modelValue:e.property.style.rotate,"onUpdate:modelValue":t[10]||(t[10]=t=>e.property.style.rotate=t),modelModifiers:{number:!0},onInput:t[11]||(t[11]=t=>e.handleNumber("rotate",t))},null,8,["modelValue"])])),_:1})])),_:1}),r(y,{span:24},{default:s((()=>[r(m,{label:"边框半径:","label-width":"73px"},{default:s((()=>[r(u,{type:"number",modelValue:e.property.style.borderRadius,"onUpdate:modelValue":t[12]||(t[12]=t=>e.property.style.borderRadius=t),modelModifiers:{number:!0},onInput:t[13]||(t[13]=t=>e.handleNumber("borderRadius",t))},null,8,["modelValue"])])),_:1})])),_:1}),0==e.property.type?(d(),p(y,{key:0,span:24},{default:s((()=>[r(m,{label:"切换图片:","label-width":"73px"},{default:s((()=>[c("img",{src:e.property.propValue,width:"275",style:{"border-radius":"5px",transform:"scale(0.9)"}},null,8,Ke),c("input",{class:"previewUpload",type:"file",onChange:t[14]||(t[14]=(...t)=>e.handleFileChange&&e.handleFileChange(...t)),id:"input",title:"点击上传图片"},null,32)])),_:1})])),_:1})):M("",!0),1==e.property.type?(d(),p(y,{key:1,span:24},{default:s((()=>[r(m,{label:"默认焦点:","label-width":"73px"},{default:s((()=>[r(f,{modelValue:e.property.default,"onUpdate:modelValue":t[15]||(t[15]=t=>e.property.default=t)},{default:s((()=>[r(h,{label:"是",value:!0}),r(h,{label:"否",value:!1})])),_:1},8,["modelValue"])])),_:1})])),_:1})):M("",!0),1==e.property.type?(d(),p(y,{key:2,span:24},{default:s((()=>[r(m,{label:"焦点颜色:","label-width":"73px"},{default:s((()=>[r(x,{modelValue:e.property.style.color,"onUpdate:modelValue":t[16]||(t[16]=t=>e.property.style.color=t)},null,8,["modelValue"])])),_:1})])),_:1})):M("",!0),2==e.property.type?(d(),p(y,{key:3,span:24},{default:s((()=>[r(m,{label:"文字颜色:","label-width":"73px"},{default:s((()=>[r(x,{modelValue:e.property.style.color,"onUpdate:modelValue":t[17]||(t[17]=t=>e.property.style.color=t)},null,8,["modelValue"])])),_:1})])),_:1})):M("",!0),2==e.property.type?(d(),p(y,{key:4,span:24},{default:s((()=>[r(m,{label:"文字大小:","label-width":"73px"},{default:s((()=>[r(u,{type:"number",modelValue:e.property.style.fontSize,"onUpdate:modelValue":t[18]||(t[18]=t=>e.property.style.fontSize=t),modelModifiers:{number:!0},onInput:t[19]||(t[19]=t=>e.handleNumber("fontSize",t))},null,8,["modelValue"])])),_:1})])),_:1})):M("",!0),2==e.property.type?(d(),p(y,{key:5,span:24},{default:s((()=>[r(m,{label:"文字加粗:","label-width":"73px"},{default:s((()=>[r(v,{modelValue:e.property.style.fontWeight,"onUpdate:modelValue":t[20]||(t[20]=t=>e.property.style.fontWeight=t),modelModifiers:{number:!0},label:400},{default:s((()=>[$e])),_:1},8,["modelValue"]),r(v,{modelValue:e.property.style.fontWeight,"onUpdate:modelValue":t[21]||(t[21]=t=>e.property.style.fontWeight=t),modelModifiers:{number:!0},label:700},{default:s((()=>[Ge])),_:1},8,["modelValue"])])),_:1})])),_:1})):M("",!0)])),_:1})])),_:1})},Ye.__scopeId="data-v-3506957d";const Je=t({props:{componentData:{type:Object||void 0},componentAll:{type:Array}},components:{Propertycomponent:Ye},setup:()=>({state:o({activeName:"property"}),handleClick:(e,t)=>{}})}),Qe={class:"special-right"},Ze=i("动画"),et=i("事件"),tt={key:0,class:"plsSelectItem"},ot={key:1,class:"plsSelectItem"};Je.render=function(e,t,o,n,i,c){const u=a("propertycomponent"),m=a("el-tab-pane"),y=a("el-tabs");return d(),l("div",Qe,[r(y,{modelValue:e.state.activeName,"onUpdate:modelValue":t[0]||(t[0]=t=>e.state.activeName=t),onTabClick:e.handleClick,stretch:""},{default:s((()=>[r(m,{label:"属性",name:"property"},{default:s((()=>[e.componentData&&!e.componentData.lockStatus?(d(),p(u,{key:0,"property-data":e.componentData},null,8,["property-data"])):M("",!0)])),_:1}),r(m,{disabled:"",label:"动画",name:"animation"},{default:s((()=>[Ze])),_:1}),r(m,{disabled:"",label:"事件",name:"event"},{default:s((()=>[et])),_:1})])),_:1},8,["modelValue","onTabClick"]),e.componentData?M("",!0):(d(),l("div",tt,"请选择组件")),e.componentData&&e.componentData.lockStatus?(d(),l("div",ot," 组件已锁定 ")):M("",!0)])};class nt{constructor(e){this.type=e}judgeType(){let e;return e=0===this.type?{label:"图片",type:0,component:"v-img",propValue:"./assets/image.c0bdf81e.png",lockStatus:!1,url:"",style:{width:300,rotate:0,height:200,left:40,top:40,borderRadius:5}}:1===this.type?{label:"热区",type:1,component:"v-hot",lockStatus:!1,propValue:"",default:!1,url:"",style:{width:100,color:"#409eff",rotate:0,height:100,top:40,left:40,borderRadius:5}}:{label:"文字",component:"v-word",propValue:"请输入文字",lockStatus:!1,type:2,style:{width:200,height:20,rotate:0,left:40,top:40,fontSize:18,fontWeight:400,lineHeight:20,letterSpacing:0,textAlign:"left",color:"#000",backgroundColor:""}},e}}const at=t({components:{Buttongroup:G,Globalsetting:ne,Leftarea:me,Backbutton:K,Gridcomponent:Me,Tipscomponent:le,Editorcomponent:Xe,Rightarea:Je,Showmodel:de},setup(e,t){console.log("%cdeveloper:mafengyan","color: #000;background: linear-gradient(to right,#9ED110, #50B517, #179067, #476EAF, #9f49ac, #CC42A2, #FF3BA7, #FF5800, #FF8100, #FEAC00, #FFCC00, #EDE604);font-size:20px;border-radius:15px;padding: 0 20px"),console.log("%csource:https://gitee.com/Maxfengyan/visual-drag","color: #000;background: linear-gradient(to right,#9ED110, #50B517, #179067, #476EAF, #9f49ac, #CC42A2, #FF3BA7, #FF5800, #FF8100, #FEAC00, #FFCC00, #EDE604);font-size:20px;border-radius:15px;padding: 0 20px");const n=o({dialogValue:!1,componentData:[],activeIndex:0,confirm:!1});L((()=>{}));return{state:n,createComponent:e=>{const t=new nt(e).judgeType();n.componentData.push(t)},handleActiveIndex:e=>{n.activeIndex=e}}}});u("data-v-41cdbaeb");const lt={class:"special"},rt={class:"special-top"},st={class:"special-middle"};m(),at.render=function(e,t,o,n,s,i){const p=a("buttongroup"),u=a("globalsetting"),m=a("tipscomponent"),y=a("showmodel"),h=a("leftarea"),f=a("gridcomponent"),x=a("editorcomponent"),v=a("rightarea");return d(),l("div",lt,[c("div",rt,[r(p,{onAddComponent:e.createComponent,onClearall:t[0]||(t[0]=t=>e.state.componentData=[]),"component-data":e.state.componentData},null,8,["onAddComponent","component-data"]),r(u),r(m),r(y)]),r(h,{"component-data":e.state.componentData,"active-index":e.state.activeIndex,onChangeindex:e.handleActiveIndex},null,8,["component-data","active-index","onChangeindex"]),c("div",st,[r(f),r(x,{"component-data":e.state.componentData,onActiveindex:e.handleActiveIndex},null,8,["component-data","onActiveindex"])]),r(v,{"component-data":e.state.componentData[e.state.activeIndex],"component-all":e.state.componentData},null,8,["component-data","component-all"])])},at.__scopeId="data-v-41cdbaeb";const dt=Y({setup:e=>(e,t)=>(d(),p(at))});var it;(it=dt).component(A.name,A),it.component(P.name,P),it.component(N.name,N),it.component(q.name,q),it.component(T.name,T),it.component(z.name,z),it.component(R.name,R),it.component(F.name,F),it.component(U.name,U),it.component(O.name,O),it.component(B.name,B),it.component(j.name,j),it.component(W.name,W),it.component(H.name,H),it.component(X.name,X),dt.mount("#app");
